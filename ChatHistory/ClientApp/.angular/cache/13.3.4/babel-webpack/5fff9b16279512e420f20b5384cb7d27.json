{"ast":null,"code":"/**\n * @license Angular v13.3.5\n * (c) 2010-2022 Google LLC. https://angular.io/\n * License: MIT\n */\nimport { ɵsetRootDomAdapter, DOCUMENT, XhrFactory, PlatformLocation, ɵgetDOM, ɵPLATFORM_SERVER_ID, ViewportScroller, ɵNullViewportScroller } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, Inject, InjectionToken, Injector, Optional, ViewEncapsulation, RendererStyleFlags2, PLATFORM_ID, PLATFORM_INITIALIZER, ɵALLOW_MULTIPLE_PLATFORMS, RendererFactory2, NgZone, Testability, NgModule, ɵsetDocument, createPlatformFactory, platformCore, APP_ID, ApplicationRef, ɵisPromise, Version } from '@angular/core';\nimport * as i1 from '@angular/platform-browser';\nimport { ɵBrowserDomAdapter, ɵflattenStyles, ɵNAMESPACE_URIS, ɵshimContentAttribute, ɵshimHostAttribute, ɵSharedStylesHost, ɵTRANSITION_ID, EVENT_MANAGER_PLUGINS, BrowserModule, ɵescapeHtml, TransferState } from '@angular/platform-browser';\nimport * as domino from 'domino';\nimport { ɵAnimationEngine } from '@angular/animations/browser';\nimport { ɵHttpInterceptingHandler, HttpHandler, HttpBackend, HttpClientModule } from '@angular/common/http';\nimport { ɵplatformCoreDynamic } from '@angular/platform-browser-dynamic';\nimport { ɵAnimationRendererFactory, NoopAnimationsModule } from '@angular/platform-browser/animations';\nimport { Observable, Subject } from 'rxjs';\nimport * as xhr2 from 'xhr2';\nimport * as url from 'url';\nimport { DomElementSchemaRegistry } from '@angular/compiler';\nimport { first } from 'rxjs/operators';\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction setDomTypes() {\n  // Make all Domino types available in the global env.\n  Object.assign(global, domino.impl);\n  global['KeyboardEvent'] = domino.impl.Event;\n}\n/**\n * Parses a document string to a Document object.\n */\n\n\nfunction parseDocument(html, url = '/') {\n  let window = domino.createWindow(html, url);\n  let doc = window.document;\n  return doc;\n}\n/**\n * Serializes a document to string.\n */\n\n\nfunction serializeDocument(doc) {\n  return doc.serialize();\n}\n/**\n * DOM Adapter for the server platform based on https://github.com/fgnass/domino.\n */\n\n\nclass DominoAdapter extends ɵBrowserDomAdapter {\n  constructor() {\n    super(...arguments);\n    this.supportsDOMEvents = false;\n  }\n\n  static makeCurrent() {\n    setDomTypes();\n    ɵsetRootDomAdapter(new DominoAdapter());\n  }\n\n  createHtmlDocument() {\n    return parseDocument('<html><head><title>fakeTitle</title></head><body></body></html>');\n  }\n\n  getDefaultDocument() {\n    if (!DominoAdapter.defaultDoc) {\n      DominoAdapter.defaultDoc = domino.createDocument();\n    }\n\n    return DominoAdapter.defaultDoc;\n  }\n\n  isElementNode(node) {\n    return node ? node.nodeType === DominoAdapter.defaultDoc.ELEMENT_NODE : false;\n  }\n\n  isShadowRoot(node) {\n    return node.shadowRoot == node;\n  }\n  /** @deprecated No longer being used in Ivy code. To be removed in version 14. */\n\n\n  getGlobalEventTarget(doc, target) {\n    if (target === 'window') {\n      return doc.defaultView;\n    }\n\n    if (target === 'document') {\n      return doc;\n    }\n\n    if (target === 'body') {\n      return doc.body;\n    }\n\n    return null;\n  }\n\n  getBaseHref(doc) {\n    var _a; // TODO(alxhub): Need relative path logic from BrowserDomAdapter here?\n\n\n    return ((_a = doc.documentElement.querySelector('base')) === null || _a === void 0 ? void 0 : _a.getAttribute('href')) || '';\n  }\n\n  dispatchEvent(el, evt) {\n    el.dispatchEvent(evt); // Dispatch the event to the window also.\n\n    const doc = el.ownerDocument || el;\n    const win = doc.defaultView;\n\n    if (win) {\n      win.dispatchEvent(evt);\n    }\n  }\n\n  getUserAgent() {\n    return 'Fake user agent';\n  }\n\n  getCookie(name) {\n    throw new Error('getCookie has not been implemented');\n  }\n\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Representation of the current platform state.\n *\n * @publicApi\n */\n\n\nclass PlatformState {\n  constructor(_doc) {\n    this._doc = _doc;\n  }\n  /**\n   * Renders the current state of the platform to string.\n   */\n\n\n  renderToString() {\n    return serializeDocument(this._doc);\n  }\n  /**\n   * Returns the current DOM state.\n   */\n\n\n  getDocument() {\n    return this._doc;\n  }\n\n}\n\nPlatformState.ɵfac = function PlatformState_Factory(t) {\n  return new (t || PlatformState)(i0.ɵɵinject(DOCUMENT));\n};\n\nPlatformState.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: PlatformState,\n  factory: PlatformState.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PlatformState, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, null);\n})();\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * The DI token for setting the initial config for the platform.\n *\n * @publicApi\n */\n\n\nconst INITIAL_CONFIG = new InjectionToken('Server.INITIAL_CONFIG');\n/**\n * A function that will be executed when calling `renderModuleFactory` or `renderModule` just\n * before current platform state is rendered to string.\n *\n * @publicApi\n */\n\nconst BEFORE_APP_SERIALIZED = new InjectionToken('Server.RENDER_MODULE_HOOK');\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// @see https://www.w3.org/Protocols/HTTP/1.1/draft-ietf-http-v11-spec-01#URI-syntax\n\nconst isAbsoluteUrl = /^[a-zA-Z\\-\\+.]+:\\/\\//;\n\nclass ServerXhr {\n  build() {\n    return new xhr2.XMLHttpRequest();\n  }\n\n}\n\nServerXhr.ɵfac = function ServerXhr_Factory(t) {\n  return new (t || ServerXhr)();\n};\n\nServerXhr.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ServerXhr,\n  factory: ServerXhr.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerXhr, [{\n    type: Injectable\n  }], null, null);\n})();\n\nclass ZoneMacroTaskWrapper {\n  wrap(request) {\n    return new Observable(observer => {\n      let task = null;\n      let scheduled = false;\n      let sub = null;\n      let savedResult = null;\n      let savedError = null;\n\n      const scheduleTask = _task => {\n        task = _task;\n        scheduled = true;\n        const delegate = this.delegate(request);\n        sub = delegate.subscribe(res => savedResult = res, err => {\n          if (!scheduled) {\n            throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n          }\n\n          savedError = err;\n          scheduled = false;\n          task.invoke();\n        }, () => {\n          if (!scheduled) {\n            throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n          }\n\n          scheduled = false;\n          task.invoke();\n        });\n      };\n\n      const cancelTask = _task => {\n        if (!scheduled) {\n          return;\n        }\n\n        scheduled = false;\n\n        if (sub) {\n          sub.unsubscribe();\n          sub = null;\n        }\n      };\n\n      const onComplete = () => {\n        if (savedError !== null) {\n          observer.error(savedError);\n        } else {\n          observer.next(savedResult);\n          observer.complete();\n        }\n      }; // MockBackend for Http is synchronous, which means that if scheduleTask is by\n      // scheduleMacroTask, the request will hit MockBackend and the response will be\n      // sent, causing task.invoke() to be called.\n\n\n      const _task = Zone.current.scheduleMacroTask('ZoneMacroTaskWrapper.subscribe', onComplete, {}, () => null, cancelTask);\n\n      scheduleTask(_task);\n      return () => {\n        if (scheduled && task) {\n          task.zone.cancelTask(task);\n          scheduled = false;\n        }\n\n        if (sub) {\n          sub.unsubscribe();\n          sub = null;\n        }\n      };\n    });\n  }\n\n}\n\nclass ZoneClientBackend extends ZoneMacroTaskWrapper {\n  constructor(backend, platformLocation, config) {\n    super();\n    this.backend = backend;\n    this.platformLocation = platformLocation;\n    this.config = config;\n  }\n\n  handle(request) {\n    const {\n      href,\n      protocol,\n      hostname,\n      port\n    } = this.platformLocation;\n\n    if (this.config.useAbsoluteUrl && !isAbsoluteUrl.test(request.url) && isAbsoluteUrl.test(href)) {\n      const baseHref = this.platformLocation.getBaseHrefFromDOM() || href;\n      const urlPrefix = `${protocol}//${hostname}` + (port ? `:${port}` : '');\n      const baseUrl = new URL(baseHref, urlPrefix);\n      const url = new URL(request.url, baseUrl);\n      return this.wrap(request.clone({\n        url: url.toString()\n      }));\n    }\n\n    return this.wrap(request);\n  }\n\n  delegate(request) {\n    return this.backend.handle(request);\n  }\n\n}\n\nfunction zoneWrappedInterceptingHandler(backend, injector, platformLocation, config) {\n  const realBackend = new ɵHttpInterceptingHandler(backend, injector);\n  return new ZoneClientBackend(realBackend, platformLocation, config);\n}\n\nconst SERVER_HTTP_PROVIDERS = [{\n  provide: XhrFactory,\n  useClass: ServerXhr\n}, {\n  provide: HttpHandler,\n  useFactory: zoneWrappedInterceptingHandler,\n  deps: [HttpBackend, Injector, PlatformLocation, INITIAL_CONFIG]\n}];\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction parseUrl(urlStr) {\n  const parsedUrl = url.parse(urlStr);\n  return {\n    hostname: parsedUrl.hostname || '',\n    protocol: parsedUrl.protocol || '',\n    port: parsedUrl.port || '',\n    pathname: parsedUrl.pathname || '',\n    search: parsedUrl.search || '',\n    hash: parsedUrl.hash || ''\n  };\n}\n/**\n * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n * but not the state stack.\n */\n\n\nclass ServerPlatformLocation {\n  constructor(_doc, _config) {\n    this._doc = _doc;\n    this.href = '/';\n    this.hostname = '/';\n    this.protocol = '/';\n    this.port = '/';\n    this.pathname = '/';\n    this.search = '';\n    this.hash = '';\n    this._hashUpdate = new Subject();\n    const config = _config;\n\n    if (!config) {\n      return;\n    }\n\n    if (config.url) {\n      const url = parseUrl(config.url);\n      this.protocol = url.protocol;\n      this.hostname = url.hostname;\n      this.port = url.port;\n      this.pathname = url.pathname;\n      this.search = url.search;\n      this.hash = url.hash;\n      this.href = _doc.location.href;\n    }\n\n    if (config.useAbsoluteUrl) {\n      if (!config.baseUrl) {\n        throw new Error(`\"PlatformConfig.baseUrl\" must be set if \"useAbsoluteUrl\" is true`);\n      }\n\n      const url = parseUrl(config.baseUrl);\n      this.protocol = url.protocol;\n      this.hostname = url.hostname;\n      this.port = url.port;\n    }\n  }\n\n  getBaseHrefFromDOM() {\n    return ɵgetDOM().getBaseHref(this._doc);\n  }\n\n  onPopState(fn) {\n    // No-op: a state stack is not implemented, so\n    // no events will ever come.\n    return () => {};\n  }\n\n  onHashChange(fn) {\n    const subscription = this._hashUpdate.subscribe(fn);\n\n    return () => subscription.unsubscribe();\n  }\n\n  get url() {\n    return `${this.pathname}${this.search}${this.hash}`;\n  }\n\n  setHash(value, oldUrl) {\n    if (this.hash === value) {\n      // Don't fire events if the hash has not changed.\n      return;\n    }\n\n    this.hash = value;\n    const newUrl = this.url;\n    scheduleMicroTask(() => this._hashUpdate.next({\n      type: 'hashchange',\n      state: null,\n      oldUrl,\n      newUrl\n    }));\n  }\n\n  replaceState(state, title, newUrl) {\n    const oldUrl = this.url;\n    const parsedUrl = parseUrl(newUrl);\n    this.pathname = parsedUrl.pathname;\n    this.search = parsedUrl.search;\n    this.setHash(parsedUrl.hash, oldUrl);\n  }\n\n  pushState(state, title, newUrl) {\n    this.replaceState(state, title, newUrl);\n  }\n\n  forward() {\n    throw new Error('Not implemented');\n  }\n\n  back() {\n    throw new Error('Not implemented');\n  } // History API isn't available on server, therefore return undefined\n\n\n  getState() {\n    return undefined;\n  }\n\n}\n\nServerPlatformLocation.ɵfac = function ServerPlatformLocation_Factory(t) {\n  return new (t || ServerPlatformLocation)(i0.ɵɵinject(DOCUMENT), i0.ɵɵinject(INITIAL_CONFIG, 8));\n};\n\nServerPlatformLocation.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ServerPlatformLocation,\n  factory: ServerPlatformLocation.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerPlatformLocation, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [INITIAL_CONFIG]\n      }]\n    }];\n  }, null);\n})();\n\nfunction scheduleMicroTask(fn) {\n  Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nclass ServerEventManagerPlugin\n/* extends EventManagerPlugin which is private */\n{\n  constructor(doc) {\n    this.doc = doc;\n  } // Handle all events on the server.\n\n\n  supports(eventName) {\n    return true;\n  }\n\n  addEventListener(element, eventName, handler) {\n    return ɵgetDOM().onAndCancel(element, eventName, handler);\n  }\n  /** @deprecated No longer being used in Ivy code. To be removed in version 14. */\n\n\n  addGlobalEventListener(element, eventName, handler) {\n    const target = ɵgetDOM().getGlobalEventTarget(this.doc, element);\n\n    if (!target) {\n      throw new Error(`Unsupported event target ${target} for event ${eventName}`);\n    }\n\n    return this.addEventListener(target, eventName, handler);\n  }\n\n}\n\nServerEventManagerPlugin.ɵfac = function ServerEventManagerPlugin_Factory(t) {\n  return new (t || ServerEventManagerPlugin)(i0.ɵɵinject(DOCUMENT));\n};\n\nServerEventManagerPlugin.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ServerEventManagerPlugin,\n  factory: ServerEventManagerPlugin.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerEventManagerPlugin, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, null);\n})();\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nconst EMPTY_ARRAY = [];\nconst DEFAULT_SCHEMA = new DomElementSchemaRegistry();\n\nclass ServerRendererFactory2 {\n  constructor(eventManager, ngZone, document, sharedStylesHost) {\n    this.eventManager = eventManager;\n    this.ngZone = ngZone;\n    this.document = document;\n    this.sharedStylesHost = sharedStylesHost;\n    this.rendererByCompId = new Map();\n    this.schema = DEFAULT_SCHEMA;\n    this.defaultRenderer = new DefaultServerRenderer2(eventManager, document, ngZone, this.schema);\n  }\n\n  createRenderer(element, type) {\n    if (!element || !type) {\n      return this.defaultRenderer;\n    }\n\n    switch (type.encapsulation) {\n      case ViewEncapsulation.Emulated:\n        {\n          let renderer = this.rendererByCompId.get(type.id);\n\n          if (!renderer) {\n            renderer = new EmulatedEncapsulationServerRenderer2(this.eventManager, this.document, this.ngZone, this.sharedStylesHost, this.schema, type);\n            this.rendererByCompId.set(type.id, renderer);\n          }\n\n          renderer.applyToHost(element);\n          return renderer;\n        }\n\n      default:\n        {\n          if (!this.rendererByCompId.has(type.id)) {\n            const styles = ɵflattenStyles(type.id, type.styles, []);\n            this.sharedStylesHost.addStyles(styles);\n            this.rendererByCompId.set(type.id, this.defaultRenderer);\n          }\n\n          return this.defaultRenderer;\n        }\n    }\n  }\n\n  begin() {}\n\n  end() {}\n\n}\n\nServerRendererFactory2.ɵfac = function ServerRendererFactory2_Factory(t) {\n  return new (t || ServerRendererFactory2)(i0.ɵɵinject(i1.EventManager), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(DOCUMENT), i0.ɵɵinject(i1.ɵSharedStylesHost));\n};\n\nServerRendererFactory2.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ServerRendererFactory2,\n  factory: ServerRendererFactory2.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerRendererFactory2, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.EventManager\n    }, {\n      type: i0.NgZone\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: i1.ɵSharedStylesHost\n    }];\n  }, null);\n})();\n\nclass DefaultServerRenderer2 {\n  constructor(eventManager, document, ngZone, schema) {\n    this.eventManager = eventManager;\n    this.document = document;\n    this.ngZone = ngZone;\n    this.schema = schema;\n    this.data = Object.create(null);\n    this.destroyNode = null;\n  }\n\n  destroy() {}\n\n  createElement(name, namespace, debugInfo) {\n    if (namespace) {\n      const doc = this.document || ɵgetDOM().getDefaultDocument();\n      return doc.createElementNS(ɵNAMESPACE_URIS[namespace], name);\n    }\n\n    return ɵgetDOM().createElement(name, this.document);\n  }\n\n  createComment(value, debugInfo) {\n    return ɵgetDOM().getDefaultDocument().createComment(value);\n  }\n\n  createText(value, debugInfo) {\n    const doc = ɵgetDOM().getDefaultDocument();\n    return doc.createTextNode(value);\n  }\n\n  appendChild(parent, newChild) {\n    parent.appendChild(newChild);\n  }\n\n  insertBefore(parent, newChild, refChild) {\n    if (parent) {\n      parent.insertBefore(newChild, refChild);\n    }\n  }\n\n  removeChild(parent, oldChild) {\n    if (parent) {\n      parent.removeChild(oldChild);\n    }\n  }\n\n  selectRootElement(selectorOrNode, debugInfo) {\n    let el;\n\n    if (typeof selectorOrNode === 'string') {\n      el = this.document.querySelector(selectorOrNode);\n\n      if (!el) {\n        throw new Error(`The selector \"${selectorOrNode}\" did not match any elements`);\n      }\n    } else {\n      el = selectorOrNode;\n    }\n\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n\n    return el;\n  }\n\n  parentNode(node) {\n    return node.parentNode;\n  }\n\n  nextSibling(node) {\n    return node.nextSibling;\n  }\n\n  setAttribute(el, name, value, namespace) {\n    if (namespace) {\n      el.setAttributeNS(ɵNAMESPACE_URIS[namespace], namespace + ':' + name, value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n\n  removeAttribute(el, name, namespace) {\n    if (namespace) {\n      el.removeAttributeNS(ɵNAMESPACE_URIS[namespace], name);\n    } else {\n      el.removeAttribute(name);\n    }\n  }\n\n  addClass(el, name) {\n    el.classList.add(name);\n  }\n\n  removeClass(el, name) {\n    el.classList.remove(name);\n  }\n\n  setStyle(el, style, value, flags) {\n    style = style.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\n    const styleMap = _readStyleAttribute(el);\n\n    if (flags & RendererStyleFlags2.Important) {\n      value += ' !important';\n    }\n\n    styleMap[style] = value == null ? '' : value;\n\n    _writeStyleAttribute(el, styleMap);\n  }\n\n  removeStyle(el, style, flags) {\n    // IE requires '' instead of null\n    // see https://github.com/angular/angular/issues/7916\n    this.setStyle(el, style, '', flags);\n  } // The value was validated already as a property binding, against the property name.\n  // To know this value is safe to use as an attribute, the security context of the\n  // attribute with the given name is checked against that security context of the\n  // property.\n\n\n  _isSafeToReflectProperty(tagName, propertyName) {\n    return this.schema.securityContext(tagName, propertyName, true) === this.schema.securityContext(tagName, propertyName, false);\n  }\n\n  setProperty(el, name, value) {\n    checkNoSyntheticProp(name, 'property');\n\n    if (name === 'innerText') {\n      // Domino does not support innerText. Just map it to textContent.\n      el.textContent = value;\n    }\n\n    el[name] = value; // Mirror property values for known HTML element properties in the attributes.\n    // Skip `innerhtml` which is conservatively marked as an attribute for security\n    // purposes but is not actually an attribute.\n\n    const tagName = el.tagName.toLowerCase();\n\n    if (value != null && (typeof value === 'number' || typeof value == 'string') && name.toLowerCase() !== 'innerhtml' && this.schema.hasElement(tagName, EMPTY_ARRAY) && this.schema.hasProperty(tagName, name, EMPTY_ARRAY) && this._isSafeToReflectProperty(tagName, name)) {\n      this.setAttribute(el, name, value.toString());\n    }\n  }\n\n  setValue(node, value) {\n    node.textContent = value;\n  }\n\n  listen(target, eventName, callback) {\n    checkNoSyntheticProp(eventName, 'listener');\n\n    if (typeof target === 'string') {\n      return this.eventManager.addGlobalEventListener(target, eventName, this.decoratePreventDefault(callback));\n    }\n\n    return this.eventManager.addEventListener(target, eventName, this.decoratePreventDefault(callback));\n  }\n\n  decoratePreventDefault(eventHandler) {\n    return event => {\n      // Ivy uses `Function` as a special token that allows us to unwrap the function\n      // so that it can be invoked programmatically by `DebugNode.triggerEventHandler`.\n      if (event === Function) {\n        return eventHandler;\n      } // Run the event handler inside the ngZone because event handlers are not patched\n      // by Zone on the server. This is required only for tests.\n\n\n      const allowDefaultBehavior = this.ngZone.runGuarded(() => eventHandler(event));\n\n      if (allowDefaultBehavior === false) {\n        event.preventDefault();\n        event.returnValue = false;\n      }\n\n      return undefined;\n    };\n  }\n\n}\n\nconst AT_CHARCODE = '@'.charCodeAt(0);\n\nfunction checkNoSyntheticProp(name, nameKind) {\n  if (name.charCodeAt(0) === AT_CHARCODE) {\n    throw new Error(`Unexpected synthetic ${nameKind} ${name} found. Please make sure that:\n  - Either \\`BrowserAnimationsModule\\` or \\`NoopAnimationsModule\\` are imported in your application.\n  - There is corresponding configuration for the animation named \\`${name}\\` defined in the \\`animations\\` field of the \\`@Component\\` decorator (see https://angular.io/api/core/Component#animations).`);\n  }\n}\n\nclass EmulatedEncapsulationServerRenderer2 extends DefaultServerRenderer2 {\n  constructor(eventManager, document, ngZone, sharedStylesHost, schema, component) {\n    super(eventManager, document, ngZone, schema);\n    this.component = component; // Add a 's' prefix to style attributes to indicate server.\n\n    const componentId = 's' + component.id;\n    const styles = ɵflattenStyles(componentId, component.styles, []);\n    sharedStylesHost.addStyles(styles);\n    this.contentAttr = ɵshimContentAttribute(componentId);\n    this.hostAttr = ɵshimHostAttribute(componentId);\n  }\n\n  applyToHost(element) {\n    super.setAttribute(element, this.hostAttr, '');\n  }\n\n  createElement(parent, name) {\n    const el = super.createElement(parent, name, this.document);\n    super.setAttribute(el, this.contentAttr, '');\n    return el;\n  }\n\n}\n\nfunction _readStyleAttribute(element) {\n  const styleMap = {};\n  const styleAttribute = element.getAttribute('style');\n\n  if (styleAttribute) {\n    const styleList = styleAttribute.split(/;+/g);\n\n    for (let i = 0; i < styleList.length; i++) {\n      const style = styleList[i].trim();\n\n      if (style.length > 0) {\n        const colonIndex = style.indexOf(':');\n\n        if (colonIndex === -1) {\n          throw new Error(`Invalid CSS style: ${style}`);\n        }\n\n        const name = style.substr(0, colonIndex).trim();\n        styleMap[name] = style.substr(colonIndex + 1).trim();\n      }\n    }\n  }\n\n  return styleMap;\n}\n\nfunction _writeStyleAttribute(element, styleMap) {\n  let styleAttrValue = '';\n\n  for (const key in styleMap) {\n    const newValue = styleMap[key];\n\n    if (newValue != null) {\n      styleAttrValue += key + ':' + styleMap[key] + ';';\n    }\n  }\n\n  element.setAttribute('style', styleAttrValue);\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nclass ServerStylesHost extends ɵSharedStylesHost {\n  constructor(doc, transitionId) {\n    super();\n    this.doc = doc;\n    this.transitionId = transitionId;\n    this.head = null;\n    this._styleNodes = new Set();\n    this.head = doc.getElementsByTagName('head')[0];\n  }\n\n  _addStyle(style) {\n    let adapter = ɵgetDOM();\n    const el = adapter.createElement('style');\n    el.textContent = style;\n\n    if (!!this.transitionId) {\n      el.setAttribute('ng-transition', this.transitionId);\n    }\n\n    this.head.appendChild(el);\n\n    this._styleNodes.add(el);\n  }\n\n  onStylesAdded(additions) {\n    additions.forEach(style => this._addStyle(style));\n  }\n\n  ngOnDestroy() {\n    this._styleNodes.forEach(styleNode => styleNode.remove());\n  }\n\n}\n\nServerStylesHost.ɵfac = function ServerStylesHost_Factory(t) {\n  return new (t || ServerStylesHost)(i0.ɵɵinject(DOCUMENT), i0.ɵɵinject(ɵTRANSITION_ID, 8));\n};\n\nServerStylesHost.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ServerStylesHost,\n  factory: ServerStylesHost.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerStylesHost, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [ɵTRANSITION_ID]\n      }]\n    }];\n  }, null);\n})();\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nfunction notSupported(feature) {\n  throw new Error(`platform-server does not support '${feature}'.`);\n}\n\nconst INTERNAL_SERVER_PLATFORM_PROVIDERS = [{\n  provide: DOCUMENT,\n  useFactory: _document,\n  deps: [Injector]\n}, {\n  provide: PLATFORM_ID,\n  useValue: ɵPLATFORM_SERVER_ID\n}, {\n  provide: PLATFORM_INITIALIZER,\n  useFactory: initDominoAdapter,\n  multi: true,\n  deps: [Injector]\n}, {\n  provide: PlatformLocation,\n  useClass: ServerPlatformLocation,\n  deps: [DOCUMENT, [Optional, INITIAL_CONFIG]]\n}, {\n  provide: PlatformState,\n  deps: [DOCUMENT]\n}, // Add special provider that allows multiple instances of platformServer* to be created.\n{\n  provide: ɵALLOW_MULTIPLE_PLATFORMS,\n  useValue: true\n}];\n\nfunction initDominoAdapter(injector) {\n  return () => {\n    DominoAdapter.makeCurrent();\n  };\n}\n\nfunction instantiateServerRendererFactory(renderer, engine, zone) {\n  return new ɵAnimationRendererFactory(renderer, engine, zone);\n}\n\nconst SERVER_RENDER_PROVIDERS = [ServerRendererFactory2, {\n  provide: RendererFactory2,\n  useFactory: instantiateServerRendererFactory,\n  deps: [ServerRendererFactory2, ɵAnimationEngine, NgZone]\n}, ServerStylesHost, {\n  provide: ɵSharedStylesHost,\n  useExisting: ServerStylesHost\n}, {\n  provide: EVENT_MANAGER_PLUGINS,\n  multi: true,\n  useClass: ServerEventManagerPlugin\n}];\n/**\n * The ng module for the server.\n *\n * @publicApi\n */\n\nclass ServerModule {}\n\nServerModule.ɵfac = function ServerModule_Factory(t) {\n  return new (t || ServerModule)();\n};\n\nServerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ServerModule\n});\nServerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [SERVER_RENDER_PROVIDERS, SERVER_HTTP_PROVIDERS, {\n    provide: Testability,\n    useValue: null\n  }, {\n    provide: ViewportScroller,\n    useClass: ɵNullViewportScroller\n  }],\n  imports: [[HttpClientModule, NoopAnimationsModule], BrowserModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerModule, [{\n    type: NgModule,\n    args: [{\n      exports: [BrowserModule],\n      imports: [HttpClientModule, NoopAnimationsModule],\n      providers: [SERVER_RENDER_PROVIDERS, SERVER_HTTP_PROVIDERS, {\n        provide: Testability,\n        useValue: null\n      }, {\n        provide: ViewportScroller,\n        useClass: ɵNullViewportScroller\n      }]\n    }]\n  }], null, null);\n})();\n\nfunction _document(injector) {\n  let config = injector.get(INITIAL_CONFIG, null);\n  const document = config && config.document ? parseDocument(config.document, config.url) : ɵgetDOM().createHtmlDocument(); // Tell ivy about the global document\n\n  ɵsetDocument(document);\n  return document;\n}\n/**\n * @publicApi\n */\n\n\nconst platformServer = createPlatformFactory(platformCore, 'server', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n/**\n * The server platform that supports the runtime compiler.\n *\n * @publicApi\n */\n\nconst platformDynamicServer = createPlatformFactory(ɵplatformCoreDynamic, 'serverDynamic', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction serializeTransferStateFactory(doc, appId, transferStore) {\n  return () => {\n    const script = doc.createElement('script');\n    script.id = appId + '-state';\n    script.setAttribute('type', 'application/json');\n    script.textContent = ɵescapeHtml(transferStore.toJson());\n    doc.body.appendChild(script);\n  };\n}\n/**\n * NgModule to install on the server side while using the `TransferState` to transfer state from\n * server to client.\n *\n * @publicApi\n */\n\n\nclass ServerTransferStateModule {}\n\nServerTransferStateModule.ɵfac = function ServerTransferStateModule_Factory(t) {\n  return new (t || ServerTransferStateModule)();\n};\n\nServerTransferStateModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ServerTransferStateModule\n});\nServerTransferStateModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [TransferState, {\n    provide: BEFORE_APP_SERIALIZED,\n    useFactory: serializeTransferStateFactory,\n    deps: [DOCUMENT, APP_ID, TransferState],\n    multi: true\n  }]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerTransferStateModule, [{\n    type: NgModule,\n    args: [{\n      providers: [TransferState, {\n        provide: BEFORE_APP_SERIALIZED,\n        useFactory: serializeTransferStateFactory,\n        deps: [DOCUMENT, APP_ID, TransferState],\n        multi: true\n      }]\n    }]\n  }], null, null);\n})();\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nfunction _getPlatform(platformFactory, options) {\n  const extraProviders = options.extraProviders ? options.extraProviders : [];\n  return platformFactory([{\n    provide: INITIAL_CONFIG,\n    useValue: {\n      document: options.document,\n      url: options.url\n    }\n  }, extraProviders]);\n}\n\nfunction _render(platform, moduleRefPromise) {\n  return moduleRefPromise.then(moduleRef => {\n    const transitionId = moduleRef.injector.get(ɵTRANSITION_ID, null);\n\n    if (!transitionId) {\n      throw new Error(`renderModule[Factory]() requires the use of BrowserModule.withServerTransition() to ensure\nthe server-rendered app can be properly bootstrapped into a client app.`);\n    }\n\n    const applicationRef = moduleRef.injector.get(ApplicationRef);\n    return applicationRef.isStable.pipe(first(isStable => isStable)).toPromise().then(() => {\n      const platformState = platform.injector.get(PlatformState);\n      const asyncPromises = []; // Run any BEFORE_APP_SERIALIZED callbacks just before rendering to string.\n\n      const callbacks = moduleRef.injector.get(BEFORE_APP_SERIALIZED, null);\n\n      if (callbacks) {\n        for (const callback of callbacks) {\n          try {\n            const callbackResult = callback();\n\n            if (ɵisPromise(callbackResult)) {\n              // TODO: in TS3.7, callbackResult is void.\n              asyncPromises.push(callbackResult);\n            }\n          } catch (e) {\n            // Ignore exceptions.\n            console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n          }\n        }\n      }\n\n      const complete = () => {\n        const output = platformState.renderToString();\n        platform.destroy();\n        return output;\n      };\n\n      if (asyncPromises.length === 0) {\n        return complete();\n      }\n\n      return Promise.all(asyncPromises.map(asyncPromise => {\n        return asyncPromise.catch(e => {\n          console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n        });\n      })).then(complete);\n    });\n  });\n}\n/**\n * Renders a Module to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * @publicApi\n */\n\n\nfunction renderModule(module, options) {\n  const platform = _getPlatform(platformDynamicServer, options);\n\n  return _render(platform, platform.bootstrapModule(module));\n}\n/**\n * Renders a {@link NgModuleFactory} to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * @publicApi\n *\n * @deprecated\n * This symbol is no longer necessary as of Angular v13.\n * Use {@link renderModule} API instead.\n */\n\n\nfunction renderModuleFactory(moduleFactory, options) {\n  const platform = _getPlatform(platformServer, options);\n\n  return _render(platform, platform.bootstrapModuleFactory(moduleFactory));\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @publicApi\n */\n\n\nconst VERSION = new Version('13.3.5');\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BEFORE_APP_SERIALIZED, INITIAL_CONFIG, PlatformState, ServerModule, ServerTransferStateModule, VERSION, platformDynamicServer, platformServer, renderModule, renderModuleFactory, INTERNAL_SERVER_PLATFORM_PROVIDERS as ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, SERVER_RENDER_PROVIDERS as ɵSERVER_RENDER_PROVIDERS, ServerRendererFactory2 as ɵServerRendererFactory2 };","map":{"version":3,"sources":["C:/Dev/Personal/ChatHistory/ChatHistory/ClientApp/node_modules/@angular/platform-server/fesm2015/platform-server.mjs"],"names":["ɵsetRootDomAdapter","DOCUMENT","XhrFactory","PlatformLocation","ɵgetDOM","ɵPLATFORM_SERVER_ID","ViewportScroller","ɵNullViewportScroller","i0","Injectable","Inject","InjectionToken","Injector","Optional","ViewEncapsulation","RendererStyleFlags2","PLATFORM_ID","PLATFORM_INITIALIZER","ɵALLOW_MULTIPLE_PLATFORMS","RendererFactory2","NgZone","Testability","NgModule","ɵsetDocument","createPlatformFactory","platformCore","APP_ID","ApplicationRef","ɵisPromise","Version","i1","ɵBrowserDomAdapter","ɵflattenStyles","ɵNAMESPACE_URIS","ɵshimContentAttribute","ɵshimHostAttribute","ɵSharedStylesHost","ɵTRANSITION_ID","EVENT_MANAGER_PLUGINS","BrowserModule","ɵescapeHtml","TransferState","domino","ɵAnimationEngine","ɵHttpInterceptingHandler","HttpHandler","HttpBackend","HttpClientModule","ɵplatformCoreDynamic","ɵAnimationRendererFactory","NoopAnimationsModule","Observable","Subject","xhr2","url","DomElementSchemaRegistry","first","setDomTypes","Object","assign","global","impl","Event","parseDocument","html","window","createWindow","doc","document","serializeDocument","serialize","DominoAdapter","constructor","arguments","supportsDOMEvents","makeCurrent","createHtmlDocument","getDefaultDocument","defaultDoc","createDocument","isElementNode","node","nodeType","ELEMENT_NODE","isShadowRoot","shadowRoot","getGlobalEventTarget","target","defaultView","body","getBaseHref","_a","documentElement","querySelector","getAttribute","dispatchEvent","el","evt","ownerDocument","win","getUserAgent","getCookie","name","Error","PlatformState","_doc","renderToString","getDocument","ɵfac","ɵprov","type","undefined","decorators","args","INITIAL_CONFIG","BEFORE_APP_SERIALIZED","isAbsoluteUrl","ServerXhr","build","XMLHttpRequest","ZoneMacroTaskWrapper","wrap","request","observer","task","scheduled","sub","savedResult","savedError","scheduleTask","_task","delegate","subscribe","res","err","invoke","cancelTask","unsubscribe","onComplete","error","next","complete","Zone","current","scheduleMacroTask","zone","ZoneClientBackend","backend","platformLocation","config","handle","href","protocol","hostname","port","useAbsoluteUrl","test","baseHref","getBaseHrefFromDOM","urlPrefix","baseUrl","URL","clone","toString","zoneWrappedInterceptingHandler","injector","realBackend","SERVER_HTTP_PROVIDERS","provide","useClass","useFactory","deps","parseUrl","urlStr","parsedUrl","parse","pathname","search","hash","ServerPlatformLocation","_config","_hashUpdate","location","onPopState","fn","onHashChange","subscription","setHash","value","oldUrl","newUrl","scheduleMicroTask","state","replaceState","title","pushState","forward","back","getState","ServerEventManagerPlugin","supports","eventName","addEventListener","element","handler","onAndCancel","addGlobalEventListener","EMPTY_ARRAY","DEFAULT_SCHEMA","ServerRendererFactory2","eventManager","ngZone","sharedStylesHost","rendererByCompId","Map","schema","defaultRenderer","DefaultServerRenderer2","createRenderer","encapsulation","Emulated","renderer","get","id","EmulatedEncapsulationServerRenderer2","set","applyToHost","has","styles","addStyles","begin","end","EventManager","data","create","destroyNode","destroy","createElement","namespace","debugInfo","createElementNS","createComment","createText","createTextNode","appendChild","parent","newChild","insertBefore","refChild","removeChild","oldChild","selectRootElement","selectorOrNode","firstChild","parentNode","nextSibling","setAttribute","setAttributeNS","removeAttribute","removeAttributeNS","addClass","classList","add","removeClass","remove","setStyle","style","flags","replace","toLowerCase","styleMap","_readStyleAttribute","Important","_writeStyleAttribute","removeStyle","_isSafeToReflectProperty","tagName","propertyName","securityContext","setProperty","checkNoSyntheticProp","textContent","hasElement","hasProperty","setValue","listen","callback","decoratePreventDefault","eventHandler","event","Function","allowDefaultBehavior","runGuarded","preventDefault","returnValue","AT_CHARCODE","charCodeAt","nameKind","component","componentId","contentAttr","hostAttr","styleAttribute","styleList","split","i","length","trim","colonIndex","indexOf","substr","styleAttrValue","key","newValue","ServerStylesHost","transitionId","head","_styleNodes","Set","getElementsByTagName","_addStyle","adapter","onStylesAdded","additions","forEach","ngOnDestroy","styleNode","notSupported","feature","INTERNAL_SERVER_PLATFORM_PROVIDERS","_document","useValue","initDominoAdapter","multi","instantiateServerRendererFactory","engine","SERVER_RENDER_PROVIDERS","useExisting","ServerModule","ɵmod","ɵinj","exports","imports","providers","platformServer","platformDynamicServer","serializeTransferStateFactory","appId","transferStore","script","toJson","ServerTransferStateModule","_getPlatform","platformFactory","options","extraProviders","_render","platform","moduleRefPromise","then","moduleRef","applicationRef","isStable","pipe","toPromise","platformState","asyncPromises","callbacks","callbackResult","push","e","console","warn","output","Promise","all","map","asyncPromise","catch","renderModule","module","bootstrapModule","renderModuleFactory","moduleFactory","bootstrapModuleFactory","VERSION","ɵINTERNAL_SERVER_PLATFORM_PROVIDERS","ɵSERVER_RENDER_PROVIDERS","ɵServerRendererFactory2"],"mappings":"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","sourcesContent":["/**\n * @license Angular v13.3.5\n * (c) 2010-2022 Google LLC. https://angular.io/\n * License: MIT\n */\n\nimport { ɵsetRootDomAdapter, DOCUMENT, XhrFactory, PlatformLocation, ɵgetDOM, ɵPLATFORM_SERVER_ID, ViewportScroller, ɵNullViewportScroller } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, Inject, InjectionToken, Injector, Optional, ViewEncapsulation, RendererStyleFlags2, PLATFORM_ID, PLATFORM_INITIALIZER, ɵALLOW_MULTIPLE_PLATFORMS, RendererFactory2, NgZone, Testability, NgModule, ɵsetDocument, createPlatformFactory, platformCore, APP_ID, ApplicationRef, ɵisPromise, Version } from '@angular/core';\nimport * as i1 from '@angular/platform-browser';\nimport { ɵBrowserDomAdapter, ɵflattenStyles, ɵNAMESPACE_URIS, ɵshimContentAttribute, ɵshimHostAttribute, ɵSharedStylesHost, ɵTRANSITION_ID, EVENT_MANAGER_PLUGINS, BrowserModule, ɵescapeHtml, TransferState } from '@angular/platform-browser';\nimport * as domino from 'domino';\nimport { ɵAnimationEngine } from '@angular/animations/browser';\nimport { ɵHttpInterceptingHandler, HttpHandler, HttpBackend, HttpClientModule } from '@angular/common/http';\nimport { ɵplatformCoreDynamic } from '@angular/platform-browser-dynamic';\nimport { ɵAnimationRendererFactory, NoopAnimationsModule } from '@angular/platform-browser/animations';\nimport { Observable, Subject } from 'rxjs';\nimport * as xhr2 from 'xhr2';\nimport * as url from 'url';\nimport { DomElementSchemaRegistry } from '@angular/compiler';\nimport { first } from 'rxjs/operators';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction setDomTypes() {\n    // Make all Domino types available in the global env.\n    Object.assign(global, domino.impl);\n    global['KeyboardEvent'] = domino.impl.Event;\n}\n/**\n * Parses a document string to a Document object.\n */\nfunction parseDocument(html, url = '/') {\n    let window = domino.createWindow(html, url);\n    let doc = window.document;\n    return doc;\n}\n/**\n * Serializes a document to string.\n */\nfunction serializeDocument(doc) {\n    return doc.serialize();\n}\n/**\n * DOM Adapter for the server platform based on https://github.com/fgnass/domino.\n */\nclass DominoAdapter extends ɵBrowserDomAdapter {\n    constructor() {\n        super(...arguments);\n        this.supportsDOMEvents = false;\n    }\n    static makeCurrent() {\n        setDomTypes();\n        ɵsetRootDomAdapter(new DominoAdapter());\n    }\n    createHtmlDocument() {\n        return parseDocument('<html><head><title>fakeTitle</title></head><body></body></html>');\n    }\n    getDefaultDocument() {\n        if (!DominoAdapter.defaultDoc) {\n            DominoAdapter.defaultDoc = domino.createDocument();\n        }\n        return DominoAdapter.defaultDoc;\n    }\n    isElementNode(node) {\n        return node ? node.nodeType === DominoAdapter.defaultDoc.ELEMENT_NODE : false;\n    }\n    isShadowRoot(node) {\n        return node.shadowRoot == node;\n    }\n    /** @deprecated No longer being used in Ivy code. To be removed in version 14. */\n    getGlobalEventTarget(doc, target) {\n        if (target === 'window') {\n            return doc.defaultView;\n        }\n        if (target === 'document') {\n            return doc;\n        }\n        if (target === 'body') {\n            return doc.body;\n        }\n        return null;\n    }\n    getBaseHref(doc) {\n        var _a;\n        // TODO(alxhub): Need relative path logic from BrowserDomAdapter here?\n        return ((_a = doc.documentElement.querySelector('base')) === null || _a === void 0 ? void 0 : _a.getAttribute('href')) || '';\n    }\n    dispatchEvent(el, evt) {\n        el.dispatchEvent(evt);\n        // Dispatch the event to the window also.\n        const doc = el.ownerDocument || el;\n        const win = doc.defaultView;\n        if (win) {\n            win.dispatchEvent(evt);\n        }\n    }\n    getUserAgent() {\n        return 'Fake user agent';\n    }\n    getCookie(name) {\n        throw new Error('getCookie has not been implemented');\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Representation of the current platform state.\n *\n * @publicApi\n */\nclass PlatformState {\n    constructor(_doc) {\n        this._doc = _doc;\n    }\n    /**\n     * Renders the current state of the platform to string.\n     */\n    renderToString() {\n        return serializeDocument(this._doc);\n    }\n    /**\n     * Returns the current DOM state.\n     */\n    getDocument() {\n        return this._doc;\n    }\n}\nPlatformState.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: PlatformState, deps: [{ token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Injectable });\nPlatformState.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: PlatformState });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: PlatformState, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }];\n    } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The DI token for setting the initial config for the platform.\n *\n * @publicApi\n */\nconst INITIAL_CONFIG = new InjectionToken('Server.INITIAL_CONFIG');\n/**\n * A function that will be executed when calling `renderModuleFactory` or `renderModule` just\n * before current platform state is rendered to string.\n *\n * @publicApi\n */\nconst BEFORE_APP_SERIALIZED = new InjectionToken('Server.RENDER_MODULE_HOOK');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// @see https://www.w3.org/Protocols/HTTP/1.1/draft-ietf-http-v11-spec-01#URI-syntax\nconst isAbsoluteUrl = /^[a-zA-Z\\-\\+.]+:\\/\\//;\nclass ServerXhr {\n    build() {\n        return new xhr2.XMLHttpRequest();\n    }\n}\nServerXhr.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerXhr, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nServerXhr.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerXhr });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerXhr, decorators: [{\n            type: Injectable\n        }] });\nclass ZoneMacroTaskWrapper {\n    wrap(request) {\n        return new Observable((observer) => {\n            let task = null;\n            let scheduled = false;\n            let sub = null;\n            let savedResult = null;\n            let savedError = null;\n            const scheduleTask = (_task) => {\n                task = _task;\n                scheduled = true;\n                const delegate = this.delegate(request);\n                sub = delegate.subscribe(res => savedResult = res, err => {\n                    if (!scheduled) {\n                        throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n                    }\n                    savedError = err;\n                    scheduled = false;\n                    task.invoke();\n                }, () => {\n                    if (!scheduled) {\n                        throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n                    }\n                    scheduled = false;\n                    task.invoke();\n                });\n            };\n            const cancelTask = (_task) => {\n                if (!scheduled) {\n                    return;\n                }\n                scheduled = false;\n                if (sub) {\n                    sub.unsubscribe();\n                    sub = null;\n                }\n            };\n            const onComplete = () => {\n                if (savedError !== null) {\n                    observer.error(savedError);\n                }\n                else {\n                    observer.next(savedResult);\n                    observer.complete();\n                }\n            };\n            // MockBackend for Http is synchronous, which means that if scheduleTask is by\n            // scheduleMacroTask, the request will hit MockBackend and the response will be\n            // sent, causing task.invoke() to be called.\n            const _task = Zone.current.scheduleMacroTask('ZoneMacroTaskWrapper.subscribe', onComplete, {}, () => null, cancelTask);\n            scheduleTask(_task);\n            return () => {\n                if (scheduled && task) {\n                    task.zone.cancelTask(task);\n                    scheduled = false;\n                }\n                if (sub) {\n                    sub.unsubscribe();\n                    sub = null;\n                }\n            };\n        });\n    }\n}\nclass ZoneClientBackend extends ZoneMacroTaskWrapper {\n    constructor(backend, platformLocation, config) {\n        super();\n        this.backend = backend;\n        this.platformLocation = platformLocation;\n        this.config = config;\n    }\n    handle(request) {\n        const { href, protocol, hostname, port } = this.platformLocation;\n        if (this.config.useAbsoluteUrl && !isAbsoluteUrl.test(request.url) &&\n            isAbsoluteUrl.test(href)) {\n            const baseHref = this.platformLocation.getBaseHrefFromDOM() || href;\n            const urlPrefix = `${protocol}//${hostname}` + (port ? `:${port}` : '');\n            const baseUrl = new URL(baseHref, urlPrefix);\n            const url = new URL(request.url, baseUrl);\n            return this.wrap(request.clone({ url: url.toString() }));\n        }\n        return this.wrap(request);\n    }\n    delegate(request) {\n        return this.backend.handle(request);\n    }\n}\nfunction zoneWrappedInterceptingHandler(backend, injector, platformLocation, config) {\n    const realBackend = new ɵHttpInterceptingHandler(backend, injector);\n    return new ZoneClientBackend(realBackend, platformLocation, config);\n}\nconst SERVER_HTTP_PROVIDERS = [\n    { provide: XhrFactory, useClass: ServerXhr }, {\n        provide: HttpHandler,\n        useFactory: zoneWrappedInterceptingHandler,\n        deps: [HttpBackend, Injector, PlatformLocation, INITIAL_CONFIG]\n    }\n];\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction parseUrl(urlStr) {\n    const parsedUrl = url.parse(urlStr);\n    return {\n        hostname: parsedUrl.hostname || '',\n        protocol: parsedUrl.protocol || '',\n        port: parsedUrl.port || '',\n        pathname: parsedUrl.pathname || '',\n        search: parsedUrl.search || '',\n        hash: parsedUrl.hash || '',\n    };\n}\n/**\n * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n * but not the state stack.\n */\nclass ServerPlatformLocation {\n    constructor(_doc, _config) {\n        this._doc = _doc;\n        this.href = '/';\n        this.hostname = '/';\n        this.protocol = '/';\n        this.port = '/';\n        this.pathname = '/';\n        this.search = '';\n        this.hash = '';\n        this._hashUpdate = new Subject();\n        const config = _config;\n        if (!config) {\n            return;\n        }\n        if (config.url) {\n            const url = parseUrl(config.url);\n            this.protocol = url.protocol;\n            this.hostname = url.hostname;\n            this.port = url.port;\n            this.pathname = url.pathname;\n            this.search = url.search;\n            this.hash = url.hash;\n            this.href = _doc.location.href;\n        }\n        if (config.useAbsoluteUrl) {\n            if (!config.baseUrl) {\n                throw new Error(`\"PlatformConfig.baseUrl\" must be set if \"useAbsoluteUrl\" is true`);\n            }\n            const url = parseUrl(config.baseUrl);\n            this.protocol = url.protocol;\n            this.hostname = url.hostname;\n            this.port = url.port;\n        }\n    }\n    getBaseHrefFromDOM() {\n        return ɵgetDOM().getBaseHref(this._doc);\n    }\n    onPopState(fn) {\n        // No-op: a state stack is not implemented, so\n        // no events will ever come.\n        return () => { };\n    }\n    onHashChange(fn) {\n        const subscription = this._hashUpdate.subscribe(fn);\n        return () => subscription.unsubscribe();\n    }\n    get url() {\n        return `${this.pathname}${this.search}${this.hash}`;\n    }\n    setHash(value, oldUrl) {\n        if (this.hash === value) {\n            // Don't fire events if the hash has not changed.\n            return;\n        }\n        this.hash = value;\n        const newUrl = this.url;\n        scheduleMicroTask(() => this._hashUpdate.next({ type: 'hashchange', state: null, oldUrl, newUrl }));\n    }\n    replaceState(state, title, newUrl) {\n        const oldUrl = this.url;\n        const parsedUrl = parseUrl(newUrl);\n        this.pathname = parsedUrl.pathname;\n        this.search = parsedUrl.search;\n        this.setHash(parsedUrl.hash, oldUrl);\n    }\n    pushState(state, title, newUrl) {\n        this.replaceState(state, title, newUrl);\n    }\n    forward() {\n        throw new Error('Not implemented');\n    }\n    back() {\n        throw new Error('Not implemented');\n    }\n    // History API isn't available on server, therefore return undefined\n    getState() {\n        return undefined;\n    }\n}\nServerPlatformLocation.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerPlatformLocation, deps: [{ token: DOCUMENT }, { token: INITIAL_CONFIG, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nServerPlatformLocation.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerPlatformLocation });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerPlatformLocation, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }, { type: undefined, decorators: [{\n                        type: Optional\n                    }, {\n                        type: Inject,\n                        args: [INITIAL_CONFIG]\n                    }] }];\n    } });\nfunction scheduleMicroTask(fn) {\n    Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass ServerEventManagerPlugin /* extends EventManagerPlugin which is private */ {\n    constructor(doc) {\n        this.doc = doc;\n    }\n    // Handle all events on the server.\n    supports(eventName) {\n        return true;\n    }\n    addEventListener(element, eventName, handler) {\n        return ɵgetDOM().onAndCancel(element, eventName, handler);\n    }\n    /** @deprecated No longer being used in Ivy code. To be removed in version 14. */\n    addGlobalEventListener(element, eventName, handler) {\n        const target = ɵgetDOM().getGlobalEventTarget(this.doc, element);\n        if (!target) {\n            throw new Error(`Unsupported event target ${target} for event ${eventName}`);\n        }\n        return this.addEventListener(target, eventName, handler);\n    }\n}\nServerEventManagerPlugin.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerEventManagerPlugin /* extends EventManagerPlugin which is private */, deps: [{ token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Injectable });\nServerEventManagerPlugin.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerEventManagerPlugin /* extends EventManagerPlugin which is private */ });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerEventManagerPlugin /* extends EventManagerPlugin which is private */, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }];\n    } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst EMPTY_ARRAY = [];\nconst DEFAULT_SCHEMA = new DomElementSchemaRegistry();\nclass ServerRendererFactory2 {\n    constructor(eventManager, ngZone, document, sharedStylesHost) {\n        this.eventManager = eventManager;\n        this.ngZone = ngZone;\n        this.document = document;\n        this.sharedStylesHost = sharedStylesHost;\n        this.rendererByCompId = new Map();\n        this.schema = DEFAULT_SCHEMA;\n        this.defaultRenderer = new DefaultServerRenderer2(eventManager, document, ngZone, this.schema);\n    }\n    createRenderer(element, type) {\n        if (!element || !type) {\n            return this.defaultRenderer;\n        }\n        switch (type.encapsulation) {\n            case ViewEncapsulation.Emulated: {\n                let renderer = this.rendererByCompId.get(type.id);\n                if (!renderer) {\n                    renderer = new EmulatedEncapsulationServerRenderer2(this.eventManager, this.document, this.ngZone, this.sharedStylesHost, this.schema, type);\n                    this.rendererByCompId.set(type.id, renderer);\n                }\n                renderer.applyToHost(element);\n                return renderer;\n            }\n            default: {\n                if (!this.rendererByCompId.has(type.id)) {\n                    const styles = ɵflattenStyles(type.id, type.styles, []);\n                    this.sharedStylesHost.addStyles(styles);\n                    this.rendererByCompId.set(type.id, this.defaultRenderer);\n                }\n                return this.defaultRenderer;\n            }\n        }\n    }\n    begin() { }\n    end() { }\n}\nServerRendererFactory2.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerRendererFactory2, deps: [{ token: i1.EventManager }, { token: i0.NgZone }, { token: DOCUMENT }, { token: i1.ɵSharedStylesHost }], target: i0.ɵɵFactoryTarget.Injectable });\nServerRendererFactory2.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerRendererFactory2 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerRendererFactory2, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () {\n        return [{ type: i1.EventManager }, { type: i0.NgZone }, { type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }, { type: i1.ɵSharedStylesHost }];\n    } });\nclass DefaultServerRenderer2 {\n    constructor(eventManager, document, ngZone, schema) {\n        this.eventManager = eventManager;\n        this.document = document;\n        this.ngZone = ngZone;\n        this.schema = schema;\n        this.data = Object.create(null);\n        this.destroyNode = null;\n    }\n    destroy() { }\n    createElement(name, namespace, debugInfo) {\n        if (namespace) {\n            const doc = this.document || ɵgetDOM().getDefaultDocument();\n            return doc.createElementNS(ɵNAMESPACE_URIS[namespace], name);\n        }\n        return ɵgetDOM().createElement(name, this.document);\n    }\n    createComment(value, debugInfo) {\n        return ɵgetDOM().getDefaultDocument().createComment(value);\n    }\n    createText(value, debugInfo) {\n        const doc = ɵgetDOM().getDefaultDocument();\n        return doc.createTextNode(value);\n    }\n    appendChild(parent, newChild) {\n        parent.appendChild(newChild);\n    }\n    insertBefore(parent, newChild, refChild) {\n        if (parent) {\n            parent.insertBefore(newChild, refChild);\n        }\n    }\n    removeChild(parent, oldChild) {\n        if (parent) {\n            parent.removeChild(oldChild);\n        }\n    }\n    selectRootElement(selectorOrNode, debugInfo) {\n        let el;\n        if (typeof selectorOrNode === 'string') {\n            el = this.document.querySelector(selectorOrNode);\n            if (!el) {\n                throw new Error(`The selector \"${selectorOrNode}\" did not match any elements`);\n            }\n        }\n        else {\n            el = selectorOrNode;\n        }\n        while (el.firstChild) {\n            el.removeChild(el.firstChild);\n        }\n        return el;\n    }\n    parentNode(node) {\n        return node.parentNode;\n    }\n    nextSibling(node) {\n        return node.nextSibling;\n    }\n    setAttribute(el, name, value, namespace) {\n        if (namespace) {\n            el.setAttributeNS(ɵNAMESPACE_URIS[namespace], namespace + ':' + name, value);\n        }\n        else {\n            el.setAttribute(name, value);\n        }\n    }\n    removeAttribute(el, name, namespace) {\n        if (namespace) {\n            el.removeAttributeNS(ɵNAMESPACE_URIS[namespace], name);\n        }\n        else {\n            el.removeAttribute(name);\n        }\n    }\n    addClass(el, name) {\n        el.classList.add(name);\n    }\n    removeClass(el, name) {\n        el.classList.remove(name);\n    }\n    setStyle(el, style, value, flags) {\n        style = style.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n        const styleMap = _readStyleAttribute(el);\n        if (flags & RendererStyleFlags2.Important) {\n            value += ' !important';\n        }\n        styleMap[style] = value == null ? '' : value;\n        _writeStyleAttribute(el, styleMap);\n    }\n    removeStyle(el, style, flags) {\n        // IE requires '' instead of null\n        // see https://github.com/angular/angular/issues/7916\n        this.setStyle(el, style, '', flags);\n    }\n    // The value was validated already as a property binding, against the property name.\n    // To know this value is safe to use as an attribute, the security context of the\n    // attribute with the given name is checked against that security context of the\n    // property.\n    _isSafeToReflectProperty(tagName, propertyName) {\n        return this.schema.securityContext(tagName, propertyName, true) ===\n            this.schema.securityContext(tagName, propertyName, false);\n    }\n    setProperty(el, name, value) {\n        checkNoSyntheticProp(name, 'property');\n        if (name === 'innerText') {\n            // Domino does not support innerText. Just map it to textContent.\n            el.textContent = value;\n        }\n        el[name] = value;\n        // Mirror property values for known HTML element properties in the attributes.\n        // Skip `innerhtml` which is conservatively marked as an attribute for security\n        // purposes but is not actually an attribute.\n        const tagName = el.tagName.toLowerCase();\n        if (value != null && (typeof value === 'number' || typeof value == 'string') &&\n            name.toLowerCase() !== 'innerhtml' && this.schema.hasElement(tagName, EMPTY_ARRAY) &&\n            this.schema.hasProperty(tagName, name, EMPTY_ARRAY) &&\n            this._isSafeToReflectProperty(tagName, name)) {\n            this.setAttribute(el, name, value.toString());\n        }\n    }\n    setValue(node, value) {\n        node.textContent = value;\n    }\n    listen(target, eventName, callback) {\n        checkNoSyntheticProp(eventName, 'listener');\n        if (typeof target === 'string') {\n            return this.eventManager.addGlobalEventListener(target, eventName, this.decoratePreventDefault(callback));\n        }\n        return this.eventManager.addEventListener(target, eventName, this.decoratePreventDefault(callback));\n    }\n    decoratePreventDefault(eventHandler) {\n        return (event) => {\n            // Ivy uses `Function` as a special token that allows us to unwrap the function\n            // so that it can be invoked programmatically by `DebugNode.triggerEventHandler`.\n            if (event === Function) {\n                return eventHandler;\n            }\n            // Run the event handler inside the ngZone because event handlers are not patched\n            // by Zone on the server. This is required only for tests.\n            const allowDefaultBehavior = this.ngZone.runGuarded(() => eventHandler(event));\n            if (allowDefaultBehavior === false) {\n                event.preventDefault();\n                event.returnValue = false;\n            }\n            return undefined;\n        };\n    }\n}\nconst AT_CHARCODE = '@'.charCodeAt(0);\nfunction checkNoSyntheticProp(name, nameKind) {\n    if (name.charCodeAt(0) === AT_CHARCODE) {\n        throw new Error(`Unexpected synthetic ${nameKind} ${name} found. Please make sure that:\n  - Either \\`BrowserAnimationsModule\\` or \\`NoopAnimationsModule\\` are imported in your application.\n  - There is corresponding configuration for the animation named \\`${name}\\` defined in the \\`animations\\` field of the \\`@Component\\` decorator (see https://angular.io/api/core/Component#animations).`);\n    }\n}\nclass EmulatedEncapsulationServerRenderer2 extends DefaultServerRenderer2 {\n    constructor(eventManager, document, ngZone, sharedStylesHost, schema, component) {\n        super(eventManager, document, ngZone, schema);\n        this.component = component;\n        // Add a 's' prefix to style attributes to indicate server.\n        const componentId = 's' + component.id;\n        const styles = ɵflattenStyles(componentId, component.styles, []);\n        sharedStylesHost.addStyles(styles);\n        this.contentAttr = ɵshimContentAttribute(componentId);\n        this.hostAttr = ɵshimHostAttribute(componentId);\n    }\n    applyToHost(element) {\n        super.setAttribute(element, this.hostAttr, '');\n    }\n    createElement(parent, name) {\n        const el = super.createElement(parent, name, this.document);\n        super.setAttribute(el, this.contentAttr, '');\n        return el;\n    }\n}\nfunction _readStyleAttribute(element) {\n    const styleMap = {};\n    const styleAttribute = element.getAttribute('style');\n    if (styleAttribute) {\n        const styleList = styleAttribute.split(/;+/g);\n        for (let i = 0; i < styleList.length; i++) {\n            const style = styleList[i].trim();\n            if (style.length > 0) {\n                const colonIndex = style.indexOf(':');\n                if (colonIndex === -1) {\n                    throw new Error(`Invalid CSS style: ${style}`);\n                }\n                const name = style.substr(0, colonIndex).trim();\n                styleMap[name] = style.substr(colonIndex + 1).trim();\n            }\n        }\n    }\n    return styleMap;\n}\nfunction _writeStyleAttribute(element, styleMap) {\n    let styleAttrValue = '';\n    for (const key in styleMap) {\n        const newValue = styleMap[key];\n        if (newValue != null) {\n            styleAttrValue += key + ':' + styleMap[key] + ';';\n        }\n    }\n    element.setAttribute('style', styleAttrValue);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass ServerStylesHost extends ɵSharedStylesHost {\n    constructor(doc, transitionId) {\n        super();\n        this.doc = doc;\n        this.transitionId = transitionId;\n        this.head = null;\n        this._styleNodes = new Set();\n        this.head = doc.getElementsByTagName('head')[0];\n    }\n    _addStyle(style) {\n        let adapter = ɵgetDOM();\n        const el = adapter.createElement('style');\n        el.textContent = style;\n        if (!!this.transitionId) {\n            el.setAttribute('ng-transition', this.transitionId);\n        }\n        this.head.appendChild(el);\n        this._styleNodes.add(el);\n    }\n    onStylesAdded(additions) {\n        additions.forEach(style => this._addStyle(style));\n    }\n    ngOnDestroy() {\n        this._styleNodes.forEach(styleNode => styleNode.remove());\n    }\n}\nServerStylesHost.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerStylesHost, deps: [{ token: DOCUMENT }, { token: ɵTRANSITION_ID, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nServerStylesHost.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerStylesHost });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerStylesHost, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }, { type: undefined, decorators: [{\n                        type: Optional\n                    }, {\n                        type: Inject,\n                        args: [ɵTRANSITION_ID]\n                    }] }];\n    } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction notSupported(feature) {\n    throw new Error(`platform-server does not support '${feature}'.`);\n}\nconst INTERNAL_SERVER_PLATFORM_PROVIDERS = [\n    { provide: DOCUMENT, useFactory: _document, deps: [Injector] },\n    { provide: PLATFORM_ID, useValue: ɵPLATFORM_SERVER_ID },\n    { provide: PLATFORM_INITIALIZER, useFactory: initDominoAdapter, multi: true, deps: [Injector] }, {\n        provide: PlatformLocation,\n        useClass: ServerPlatformLocation,\n        deps: [DOCUMENT, [Optional, INITIAL_CONFIG]]\n    },\n    { provide: PlatformState, deps: [DOCUMENT] },\n    // Add special provider that allows multiple instances of platformServer* to be created.\n    { provide: ɵALLOW_MULTIPLE_PLATFORMS, useValue: true }\n];\nfunction initDominoAdapter(injector) {\n    return () => {\n        DominoAdapter.makeCurrent();\n    };\n}\nfunction instantiateServerRendererFactory(renderer, engine, zone) {\n    return new ɵAnimationRendererFactory(renderer, engine, zone);\n}\nconst SERVER_RENDER_PROVIDERS = [\n    ServerRendererFactory2,\n    {\n        provide: RendererFactory2,\n        useFactory: instantiateServerRendererFactory,\n        deps: [ServerRendererFactory2, ɵAnimationEngine, NgZone]\n    },\n    ServerStylesHost,\n    { provide: ɵSharedStylesHost, useExisting: ServerStylesHost },\n    { provide: EVENT_MANAGER_PLUGINS, multi: true, useClass: ServerEventManagerPlugin },\n];\n/**\n * The ng module for the server.\n *\n * @publicApi\n */\nclass ServerModule {\n}\nServerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nServerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerModule, imports: [HttpClientModule, NoopAnimationsModule], exports: [BrowserModule] });\nServerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerModule, providers: [\n        SERVER_RENDER_PROVIDERS,\n        SERVER_HTTP_PROVIDERS,\n        { provide: Testability, useValue: null },\n        { provide: ViewportScroller, useClass: ɵNullViewportScroller },\n    ], imports: [[HttpClientModule, NoopAnimationsModule], BrowserModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    exports: [BrowserModule],\n                    imports: [HttpClientModule, NoopAnimationsModule],\n                    providers: [\n                        SERVER_RENDER_PROVIDERS,\n                        SERVER_HTTP_PROVIDERS,\n                        { provide: Testability, useValue: null },\n                        { provide: ViewportScroller, useClass: ɵNullViewportScroller },\n                    ],\n                }]\n        }] });\nfunction _document(injector) {\n    let config = injector.get(INITIAL_CONFIG, null);\n    const document = config && config.document ? parseDocument(config.document, config.url) :\n        ɵgetDOM().createHtmlDocument();\n    // Tell ivy about the global document\n    ɵsetDocument(document);\n    return document;\n}\n/**\n * @publicApi\n */\nconst platformServer = createPlatformFactory(platformCore, 'server', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n/**\n * The server platform that supports the runtime compiler.\n *\n * @publicApi\n */\nconst platformDynamicServer = createPlatformFactory(ɵplatformCoreDynamic, 'serverDynamic', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction serializeTransferStateFactory(doc, appId, transferStore) {\n    return () => {\n        const script = doc.createElement('script');\n        script.id = appId + '-state';\n        script.setAttribute('type', 'application/json');\n        script.textContent = ɵescapeHtml(transferStore.toJson());\n        doc.body.appendChild(script);\n    };\n}\n/**\n * NgModule to install on the server side while using the `TransferState` to transfer state from\n * server to client.\n *\n * @publicApi\n */\nclass ServerTransferStateModule {\n}\nServerTransferStateModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerTransferStateModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nServerTransferStateModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerTransferStateModule });\nServerTransferStateModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerTransferStateModule, providers: [\n        TransferState, {\n            provide: BEFORE_APP_SERIALIZED,\n            useFactory: serializeTransferStateFactory,\n            deps: [DOCUMENT, APP_ID, TransferState],\n            multi: true,\n        }\n    ] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.5\", ngImport: i0, type: ServerTransferStateModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [\n                        TransferState, {\n                            provide: BEFORE_APP_SERIALIZED,\n                            useFactory: serializeTransferStateFactory,\n                            deps: [DOCUMENT, APP_ID, TransferState],\n                            multi: true,\n                        }\n                    ]\n                }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _getPlatform(platformFactory, options) {\n    const extraProviders = options.extraProviders ? options.extraProviders : [];\n    return platformFactory([\n        { provide: INITIAL_CONFIG, useValue: { document: options.document, url: options.url } },\n        extraProviders\n    ]);\n}\nfunction _render(platform, moduleRefPromise) {\n    return moduleRefPromise.then((moduleRef) => {\n        const transitionId = moduleRef.injector.get(ɵTRANSITION_ID, null);\n        if (!transitionId) {\n            throw new Error(`renderModule[Factory]() requires the use of BrowserModule.withServerTransition() to ensure\nthe server-rendered app can be properly bootstrapped into a client app.`);\n        }\n        const applicationRef = moduleRef.injector.get(ApplicationRef);\n        return applicationRef.isStable.pipe((first((isStable) => isStable)))\n            .toPromise()\n            .then(() => {\n            const platformState = platform.injector.get(PlatformState);\n            const asyncPromises = [];\n            // Run any BEFORE_APP_SERIALIZED callbacks just before rendering to string.\n            const callbacks = moduleRef.injector.get(BEFORE_APP_SERIALIZED, null);\n            if (callbacks) {\n                for (const callback of callbacks) {\n                    try {\n                        const callbackResult = callback();\n                        if (ɵisPromise(callbackResult)) {\n                            // TODO: in TS3.7, callbackResult is void.\n                            asyncPromises.push(callbackResult);\n                        }\n                    }\n                    catch (e) {\n                        // Ignore exceptions.\n                        console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n                    }\n                }\n            }\n            const complete = () => {\n                const output = platformState.renderToString();\n                platform.destroy();\n                return output;\n            };\n            if (asyncPromises.length === 0) {\n                return complete();\n            }\n            return Promise\n                .all(asyncPromises.map(asyncPromise => {\n                return asyncPromise.catch(e => {\n                    console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n                });\n            }))\n                .then(complete);\n        });\n    });\n}\n/**\n * Renders a Module to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * @publicApi\n */\nfunction renderModule(module, options) {\n    const platform = _getPlatform(platformDynamicServer, options);\n    return _render(platform, platform.bootstrapModule(module));\n}\n/**\n * Renders a {@link NgModuleFactory} to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * @publicApi\n *\n * @deprecated\n * This symbol is no longer necessary as of Angular v13.\n * Use {@link renderModule} API instead.\n */\nfunction renderModuleFactory(moduleFactory, options) {\n    const platform = _getPlatform(platformServer, options);\n    return _render(platform, platform.bootstrapModuleFactory(moduleFactory));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @publicApi\n */\nconst VERSION = new Version('13.3.5');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BEFORE_APP_SERIALIZED, INITIAL_CONFIG, PlatformState, ServerModule, ServerTransferStateModule, VERSION, platformDynamicServer, platformServer, renderModule, renderModuleFactory, INTERNAL_SERVER_PLATFORM_PROVIDERS as ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, SERVER_RENDER_PROVIDERS as ɵSERVER_RENDER_PROVIDERS, ServerRendererFactory2 as ɵServerRendererFactory2 };\n"]},"metadata":{},"sourceType":"module"}